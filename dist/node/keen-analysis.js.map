{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/keen-core/lib/utils/extend.js","webpack:///./node_modules/keen-core/lib/utils/each.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./node_modules/promise-polyfill/src/polyfill.js","webpack:///./lib/utils/keys-to-underscore.js","webpack:///./node_modules/keen-core/lib/utils/serialize.js","webpack:///external \"url\"","webpack:///external \"https\"","webpack:///./lib/utils/http-server.js","webpack:///./lib/blank.js","webpack:///./lib/request.js","webpack:///./lib/utils/validate-auth-credentials.js","webpack:///external \"keen-core\"","webpack:///./lib/index.js","webpack:///./lib/server.js"],"names":["mapKeysToUnderscore","obj","exludedKeys","keys","Object","convertedObj","forEach","value","key","includes","match","RegExp","replace","k","toLowerCase","Array","isArray","map","item","handleRequest","config","args","parsedUrl","url","parse","options","host","path","method","headers","data","indexOf","api_key","params","JSON","stringify","Buffer","byteLength","req","https","request","res","statusCode","resolve","body","on","d","parsedBody","error","reject","error_code","Error","message","code","abort","write","end","GET","POST","PUT","DEL","httpHandlers","requestUrlAndOptions","undefined","version","apiKey","send","bind","prototype","auth","str","timeout","num","httpRequestType","httpHandler","httpOptions","self","analysis_type","split","pop","fetchAbortController","AbortController","httpHandlerResponse","requestPromise","Promise","signal","then","response","result","interval","group_by","val","isNaN","Number","resultParsers","parsedValue","func","event_collection","query","emit","validateAuthCredentials","projectId","masterKey","readKey","KeenLibrary","arguments","length","String","a","b","mapObj","analysisType","queryParams","analysisTypeExtracted","cacheOptionsExtracted","cache","queryParamsExtracted","cacheOptions","includeMetadata","include_metadata","get","saved_query_name","savedQueryResultsUrl","name","dataset_name","queryBodyParams","timezone","Date","getTimezoneOffset","post","Query","run","q","callback","cb","output","queries","promises","i","queryPromise","analysis","push","all","err","set","attributes","v","$1","dv","index","deepValue","deepKey","_deepKey","attribute","addFilter","property","operator","filters","pkg","KeenAnalysis","put","del","Keen","extendLibrary","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;ACnEA;;AAEA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;;;;;;;ACTA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;;ACdA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,wCAAwC,SAAS;AACjD;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;;;ACnOA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA,CAAC;AACD;AACA;;;;;;;;;;;;;;;;;;;;;;QCvBgBA,mB,GAAAA,mB;AAAT,SAASA,mBAAT,CAA6BC,GAA7B,EAAkC;AACrC,QAAMC,cAAc,CAAC,OAAD,CAApB;;AAEA,QAAI,CAACD,GAAD,IAAQ,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAA3B,EAAqC,OAAOA,GAAP;;AAErC,QAAME,OAAOC,OAAOD,IAAP,CAAYF,GAAZ,KAAoB,EAAjC;AACA,QAAMI,eAAe,EAArB;AACAF,SAAKG,OAAL,CAAa,eAAO;AAChB,YAAMC,QAAQN,IAAIO,GAAJ,CAAd;AACA,YAAIN,YAAYO,QAAZ,CAAqBD,GAArB,CAAJ,EAA+B;AAC3B,mBAAOH,aAAaG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","file":"node/keen-analysis.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"keen-core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"keen-core\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"keen-core\")) : factory(root[\"keen-core\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function(__WEBPACK_EXTERNAL_MODULE__12__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","export default function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\n\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\nif (!globalNS.Promise) {\n  globalNS.Promise = Promise;\n} else if (!globalNS.Promise.prototype['finally']) {\n  globalNS.Promise.prototype['finally'] = promiseFinally;\n}\n","export function mapKeysToUnderscore(obj) {\n    const exludedKeys = ['cache'];\n\n    if (!obj || typeof obj !== 'object') return obj;\n\n    const keys = Object.keys(obj) || [];\n    const convertedObj = {};\n    keys.forEach(key => {\n        const value = obj[key];\n        if (exludedKeys.includes(key)) {\n            return convertedObj[key] = value;\n        }\n\n        if ((key.match(new RegExp('[A-Z]')))) {\n            key = key.replace(/[A-Z]/g, k => `_${k.toLowerCase()}`);\n        }\n\n        if (Array.isArray(value)) {\n            return convertedObj[key] = value.map(item => mapKeysToUnderscore(item));\n        }\n        \n        if (typeof value === 'object') {\n            return convertedObj[key] = mapKeysToUnderscore(value);\n        }\n\n      convertedObj[key] = value;\n    });\n\n    return convertedObj;\n  }","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","module.exports = require(\"url\");","module.exports = require(\"https\");","import https from 'https';\nimport url from 'url';\n\nimport serialize from 'keen-core/lib/utils/serialize';\n\nconst handleRequest = (config, args = {}) => {\n  const parsedUrl = url.parse(config.url);\n\n  const options = {\n    host: parsedUrl['hostname'],\n    path: parsedUrl.path,\n    method: config['method'],\n    headers: config['headers']\n  };\n\n  let data = '';\n\n  if (config['method'] === 'GET' || config['method'] === 'DELETE') {\n    data = '';\n    if(options.path.indexOf('?') === -1){\n      options.path += '?';\n    } else {\n      options.path += '&';\n    }\n    options.path += 'api_key=' + config.api_key;\n    if (config.params) {\n      options.path += '&' + serialize(config.params);\n    }\n  }\n  else {\n    data = config.params ? JSON.stringify(config.params) : '';\n    options['headers']['Content-Length'] = Buffer.byteLength(data);\n  }\n\n  const req = https.request(options, function(res) {\n    if (options.method === 'DELETE' && res.statusCode === 204) {\n      return args.resolve({});\n    }\n    let body = '';\n    res.on('data', function(d) {\n      body += d;\n    });\n    res.on('end', function() {\n      let parsedBody;\n      try {\n        parsedBody = JSON.parse(body);\n      } catch (error) {\n        return args.reject(error);\n      }\n      if (parsedBody.error_code) {\n        let error = new Error(parsedBody.message || 'Unknown error occurred');\n        error.code = parsedBody.error_code;\n        return args.reject(error);\n      }\n      args.resolve(parsedBody);\n    });\n  });\n\n  req.on('error', args.reject);\n  req.on('abort', () => req.abort());\n  req.write(data);\n  req.end();\n\n  return req;\n}\n\nexport const GET = handleRequest;\nexport const POST = handleRequest;\nexport const PUT = handleRequest;\nexport const DEL = handleRequest;\n","// ignore polyfills for env Node or Browser\n","import each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\nimport 'abortcontroller-polyfill/dist/polyfill-patch-fetch';\nimport 'promise-polyfill/src/polyfill';\nimport { mapKeysToUnderscore } from './utils/keys-to-underscore';\n\nimport { version } from '../package.json';\n\nexport default function request(method, httpHandlers){\n  this.httpHandlers = httpHandlers;\n  return function(requestUrlAndOptions, options = {}){\n    if (typeof requestUrlAndOptions === 'string') {\n      // backward compatibility\n      this.config = {\n        api_key : undefined,\n        method,\n        params  : {},\n        url: requestUrlAndOptions,\n        headers : {\n          'Authorization' : '',\n          'Content-type'  : 'application/json',\n          'keen-sdk': `javascript-${version}`\n        },\n        ...options\n      };\n      return this;\n    }\n\n    if (requestUrlAndOptions && requestUrlAndOptions.params) {\n      requestUrlAndOptions.params = mapKeysToUnderscore(requestUrlAndOptions.params);\n    }\n\n    this.config = {\n      api_key : undefined,\n      params  : {},\n      method,\n      headers : {\n        'Authorization' : (requestUrlAndOptions.api_key || requestUrlAndOptions.apiKey),\n        'Content-type'  : 'application/json',\n        'keen-sdk': `javascript-${version}`\n      },\n      ...requestUrlAndOptions,\n      ...options\n    };\n    return this.send();\n  }.bind(this);\n}\n\nrequest.prototype.auth = function(str){\n  if (typeof str === 'string') {\n    this.config.api_key = typeof str === 'string' ? str : undefined;\n    this.headers({\n      'Authorization': str\n    });\n  }\n  return this;\n};\n\nrequest.prototype.headers = function(obj){\n  if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config['headers'][key] = value;\n    }.bind(this));\n  }\n  return this;\n};\n\nrequest.prototype.timeout = function(num){\n  this.config.timeout = typeof num === 'number' ? num : 300 * 1000;\n  return this;\n};\n\nrequest.prototype.send = function(obj){\n  if (this.config && !this.config.api_key && !this.config.apiKey) throw new Error('Please provide a valid API key');\n  if (obj) {\n    this.config.params = (obj && typeof obj === 'object') ? mapKeysToUnderscore(obj) : {};\n  }\n  let httpRequestType = this.config['method'];\n  if (httpRequestType === 'DELETE') {\n    // delete is a reserved word in JS, so to avoid bugs\n    httpRequestType = 'DEL';\n  }\n  const httpHandler = this.httpHandlers[httpRequestType];\n  const httpOptions = extend({}, this.config);\n  const self = this;\n\n  // Temporary mod to append analysis_type to responses\n  // for generic HTTP requests to known query resources\n  if (this.config['method'] !== 'DELETE'\n    && typeof httpOptions.params.analysis_type === 'undefined') {\n    if (httpOptions.url.indexOf('/queries/') > -1\n      && httpOptions.url.indexOf('/saved/') < 0) {\n        httpOptions.params.analysis_type =\n          httpOptions.url.split('/queries/').pop();\n    }\n  }\n\n  let fetchAbortController;\n  if (typeof AbortController !== 'undefined') {\n    fetchAbortController = new AbortController();\n  }\n\n  let httpHandlerResponse;\n  const requestPromise = new Promise((resolve, reject) => {\n    const options = {};\n    if (fetchAbortController) {\n      options.signal = fetchAbortController.signal;\n    }\n    options.resolve = resolve;\n    options.reject = reject;\n    httpHandlerResponse = httpHandler(httpOptions, options);\n    return httpHandlerResponse;\n  })\n  .then(response => {\n    //Making sure that result is a number when should be\n    if(Array.isArray(response.result)){\n      if(this.config.params.interval){\n        if(this.config.params.group_by){\n          //interval and group by result\n          response.result.forEach((val) => {\n            val.value.forEach((res) => {\n              if(!isNaN(Number(res.result))){\n                res.result = Number(res.result);\n              }\n            })\n          })\n        }\n        else {\n          //interval result\n          response.result.forEach((val) => {\n            if(!isNaN(Number(val.value))){\n              val.value = Number(val.value);\n            }\n          })\n        }\n      }\n      else {\n        //group by result\n        response.result.forEach((res) => {\n          if(!isNaN(Number(res.result))){\n            res.result = Number(res.result);\n          }\n        })\n      }\n    }\n    else {\n      //simple result\n      if(!isNaN(Number(response.result))){\n        response.result = Number(response.result);\n      }\n    }\n    //math round values config check\n    if(this.config.resultParsers){\n      if(Array.isArray(response.result)){\n          if(this.config.params.interval){\n            if(this.config.params.group_by){\n              //interval and group by result\n              response.result.forEach((val) => {\n                val.value.forEach((res) => {\n                  let parsedValue;\n                  this.config.resultParsers.forEach((func) => {\n                    parsedValue = parsedValue ? func(parsedValue) : func(res.result);\n                  })\n                  res.result = parsedValue;\n                })\n              })\n            }\n            else {\n              //interval result\n              response.result.forEach((val) => {\n                let parsedValue;\n                this.config.resultParsers.forEach((func) => {\n                  parsedValue = parsedValue ? func(parsedValue) : func(val.value);\n                })\n                val.value = parsedValue;\n              })\n            }\n          }\n          else {\n            //group by result\n            response.result.forEach((res) => {\n              let parsedValue;\n              this.config.resultParsers.forEach((func) => {\n                parsedValue = parsedValue ? func(parsedValue) : func(res.result);\n              })\n              res.result = parsedValue;\n            })\n          }\n      } else if (typeof response.result === 'object') {\n        Object.keys(response.result).forEach((res) => {\n          let parsedValue;\n          this.config.resultParsers.forEach((func) => {\n            parsedValue = parsedValue ? func(parsedValue) : func(response.result[res]);\n          });\n          response.result[res] = parsedValue;\n        });\n      } else {\n        //simple result\n        let parsedValue;\n        this.config.resultParsers.forEach((func) => {\n          parsedValue = parsedValue ? func(parsedValue) : func(response.result);\n        });\n        response.result = parsedValue;\n      }\n    }\n    if (httpOptions.params &&\n      typeof httpOptions.params.event_collection !== 'undefined'\n      && typeof response.query === 'undefined') {\n        return extend({ query: httpOptions.params }, response);\n    }\n    return response;\n  });\n\n  requestPromise.abort = () => {\n    if (fetchAbortController) {\n      // browser\n      return fetchAbortController.abort();\n    }\n\n    //node\n    httpHandlerResponse.emit('abort');\n  }\n\n  return requestPromise;\n};\n","export function validateAuthCredentials(config) {\n    if (typeof config !== 'object') return;\n    if (!config.projectId) throw new Error('Please provide valid project ID');\n    if (!config.masterKey && !config.readKey) throw new Error('Please provide valid API key');\n    return true;\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","import 'promise-polyfill/src/polyfill';\nimport KeenLibrary from 'keen-core';\n\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\n\nimport { validateAuthCredentials } from './utils/validate-auth-credentials';\nimport { mapKeysToUnderscore } from './utils/keys-to-underscore';\n\nimport pkg from '../package.json';\n\nKeenLibrary.prototype.readKey = function(str){\n  if (!arguments.length) return this.config.readKey;\n  this.config.readKey = str ? String(str) : null;\n  return this;\n};\n\nKeenLibrary.prototype.query = function(a, b = undefined, options = {}){\n  validateAuthCredentials(this.config);\n  // a - analysis type or config object\n  // b - params\n  const mapObj = {\n    a: mapKeysToUnderscore(a),\n    b: mapKeysToUnderscore(b)\n  }\n  let analysisType = mapObj.a;\n  let queryParams = mapObj.b;\n\n  // all this for backward compatibility, remove in next major version\n  if (typeof a === 'object' && !b) {\n    // initialized with single argument - config object\n    const { analysis_type: analysisTypeExtracted,\n      cache: cacheOptionsExtracted,\n      ...queryParamsExtracted\n    } = mapObj.a;\n    analysisType = analysisTypeExtracted;\n    queryParams = queryParamsExtracted;\n    let cacheOptions = this.config.cache;\n    if (cacheOptionsExtracted !== undefined) {\n      cacheOptions = cacheOptionsExtracted;\n    }\n    options.cache = cacheOptions;\n  }\n  //math round values boolean for request.js\n  options.resultParsers = this.config.resultParsers;\n\n  // for deprecated queries\n  if (options.cache === undefined && this.config.cache) {\n    options.cache = { ...this.config.cache };\n  }\n\n  if (typeof queryParams === 'object' && (this.config.includeMetadata || this.config.include_metadata)) {\n    queryParams.includeMetadata = true;\n  }\n  // read saved queries - DEPRECATED - to remove\n  if (analysisType && queryParams && typeof queryParams === 'string') {\n    if (queryParams.indexOf('/result') < 0) {\n      queryParams += '/result';\n    }\n    return this\n      .get({\n        url: this.url('queries', analysisType, queryParams),\n        api_key: this.config.readKey || this.config.masterKey\n      }, options);\n  }\n\n  // read saved queries\n  else if (queryParams && queryParams.saved_query_name) {\n    let savedQueryResultsUrl =\n      queryParams.saved_query_name.indexOf('/result') > -1 ?\n      queryParams.saved_query_name\n      :\n      `${queryParams.saved_query_name}/result`\n    ;\n    return this\n      .get({\n          url: this.url(\n            'queries',\n            'saved',\n            savedQueryResultsUrl\n          ),\n          api_key: this.config.readKey || this.config.masterKey\n        },\n        options);\n  }\n\n  // cached datasets - DEPRECATED\n  else if (analysisType === 'dataset' && typeof queryParams === 'object') {\n    return this\n      .get({\n        url: this.url('datasets', queryParams.name, 'results'),\n        api_key: this.config.readKey || this.config.masterKey,\n        params: queryParams\n      }, options);\n  }\n\n  else if (queryParams && queryParams.dataset_name) {\n    return this\n      .get({\n        url: this.url('datasets', queryParams.dataset_name, 'results'),\n        api_key: this.config.readKey || this.config.masterKey,\n        params: queryParams\n      }, options);\n  }\n\n  // standard queries\n  else if (analysisType && queryParams && typeof queryParams === 'object') {\n    // Include analysis_type for downstream use\n    const queryBodyParams = extend({ analysis_type: analysisType }, queryParams);\n\n    // Localize timezone if none is set\n    if (!queryBodyParams.timezone) {\n      queryBodyParams.timezone = new Date().getTimezoneOffset() * -60;\n    }\n\n    return this\n      .post({\n        url: this.url('queries', analysisType),\n        api_key: this.config.readKey || this.config.masterKey,\n        params: queryBodyParams\n      }, options);\n  }\n  else if (analysisType && typeof analysisType === 'string' && !queryParams) {\n    return Promise.reject({\n      error_code: 'SDKError',\n      message: \".query() called with incorrect arguments\"\n    });\n  }\n};\n\n// Keen.Query handler\n// --------------------------------\nKeenLibrary.Query = Query;\n\nKeenLibrary.prototype.run = function(q, callback){\n  const self = this;\n  const cb = callback;\n  let output;\n\n  const queries = q instanceof Array? q : [q];\n  const promises = [];\n\n  each(queries, function(query, i){\n    let queryPromise;\n    if (typeof query === 'string') {\n      queryPromise = self.query('saved', query + '/result');\n    }\n    else if (query instanceof KeenLibrary.Query) {\n      // Include analysis_type for downstream use\n      queryPromise = self.query(query.analysis, extend({ analysis_type: query.analysis }, query.params), query.options);\n    } else {\n      queryPromise = query;\n    }\n    // query.abort = queryPromise.abort;\n    promises.push(queryPromise);\n  });\n\n  if (promises.length > 1) {\n    output = Promise.all(promises);\n  }\n  else {\n    // Only return single\n    output = promises[0];\n  }\n\n  if (cb) {\n    // Manually handle callback, as\n    // Promise.nodeify drops nulls\n    output.then(function(res){\n      cb(null, res);\n    });\n    output['catch'](function(err){\n      cb(err, null);\n    });\n  }\n\n  return output;\n};\n\n// DEPRECATED\nfunction Query(analysisType, params = {}, options = {}) {\n  this.analysis = analysisType;\n  this.params = {};\n- this.set(params);\n  this.options = {...options};\n}\n\nQuery.prototype.set = function(attributes) {\n  // DEPRECATED\n  const self = this;\n  each(attributes, function(v, k){\n    let key = k;\n    let value = v;\n    if (k.match(new RegExp('[A-Z]'))) {\n      key = k.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n    }\n    self.params[key] = value;\n    if (value instanceof Array) {\n      each(value, function(dv, index){\n        if (dv instanceof Array == false && typeof dv === 'object') {\n          each(dv, function(deepValue, deepKey){\n            if (deepKey.match(new RegExp('[A-Z]'))) {\n              var _deepKey = deepKey.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n              delete self.params[key][index][deepKey];\n              self.params[key][index][_deepKey] = deepValue;\n            }\n          });\n        }\n      });\n    }\n  });\n  return self;\n};\n\nQuery.prototype.get = function(attribute) {\n  // DEPRECATED\n  let key = attribute;\n  if (key.match(new RegExp('[A-Z]'))) {\n    key = key.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n  }\n  if (this.params) {\n    return this.params[key] || null;\n  }\n};\n\nQuery.prototype.addFilter = function(property, operator, value) {\n  // DEPRECATED\n  this.params.filters = this.params.filters || [];\n  this.params.filters.push({\n    'property_name': property,\n    'operator': operator,\n    'property_value': value\n  });\n  return this;\n};\n\nKeenLibrary.version = pkg.version;\n\nexport const KeenAnalysis = KeenLibrary;\nexport default KeenAnalysis;\n","import extend from 'keen-core/lib/utils/extend';\n\nimport KeenAnalysis from './index';\nimport request from './request';\nimport * as httpHandlers from './utils/http-server';\n\nKeenAnalysis.prototype.get = new request('GET', httpHandlers);\nKeenAnalysis.prototype.post = new request('POST', httpHandlers);\nKeenAnalysis.prototype.put = new request('PUT', httpHandlers);\nKeenAnalysis.prototype.del = new request('DELETE', httpHandlers);\n\nexport const Keen = KeenAnalysis.extendLibrary(KeenAnalysis);\nmodule.exports = Keen;\n"],"sourceRoot":""}