{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./node_modules/keen-core/lib/utils/each.js","webpack:///./node_modules/keen-core/lib/utils/extend.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/keen-core/lib/utils/serialize.js","webpack:///./node_modules/promise-polyfill/src/index.js","webpack:///./node_modules/promise-polyfill/src/finally.js","webpack:///./lib/utils/http-browser.js","webpack:///./lib/request.js","webpack:///./node_modules/component-emitter/index.js","webpack:///./node_modules/keen-core/lib/utils/parse-params.js","webpack:///./node_modules/keen-core/lib/index.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/setimmediate/setImmediate.js","webpack:///./node_modules/timers-browserify/main.js","webpack:///./lib/index.js","webpack:///./lib/browser.js"],"names":["root","factory","exports","module","define","amd","a","i","window","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","cb","Array","length","target","arguments","prop","g","this","Function","eval","e","each","data","query","key","JSON","stringify","push","encodeURIComponent","join","setTimeoutFunc","setTimeout","noop","Promise","fn","TypeError","_state","_handled","_value","undefined","_deferreds","doResolve","handle","self","deferred","_immediateFn","onFulfilled","onRejected","ret","reject","promise","resolve","newValue","then","finale","thisArg","apply","_unhandledRejectionFn","len","done","reason","ex","prom","constructor","_finally__WEBPACK_IMPORTED_MODULE_0__","all","arr","args","slice","remaining","res","val","race","values","setImmediate","err","console","warn","__webpack_exports__","callback","GET","config","fetch","sendFetch","xhrObject","sendXhr","xdrObject","sendXdr","url","timestamp","Date","getTime","scriptTag","document","createElement","parent","getElementsByTagName","callbackName","loaded","response","handleResponse","params","_serialize2","default","b","removeChild","onreadystatechange","readyState","onerror","src","appendChild","sendJsonp","POST","PUT","DELETE","method","headers","api_key","_each2","body","mode","ok","json","responseJSON","error_code","message","status","statusText","XMLHttpRequest","ActiveXObject","location","protocol","xhr","parse","responseText","open","setRequestHeader","send","XDomainRequest","xdr","timeout","ontimeout","onload","toLowerCase","request","getAnalysisType","httpHandlers","str","Authorization","Content-type","bind","split","auth","obj","_typeof","num","httpHandler","httpOptions","_extend2","analysis_type","indexOf","onCancel","httpRequest","augmentedResponse","event_collection","log","abort","Emitter","mixin","on","addEventListener","event","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","splice","emit","listeners","hasListeners","match","urlParams","pl","search","decode","decodeURIComponent","replace","exec","global","env","previousKeen","Keen","extend","parseParams","serialize","Client","props","configure","debug","isDefined","resources","legacyVersion","enabled","version","helpers","base","projects","projectId","events","queries","datasets","utils","extendLibrary","source","previous","noConflict","ready","writeKey","host","requestType","navigator","userAgent","masterKey","String","path","baseUrl","arg","DOMContentLoaded","testDom","test","domReady","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","run","marker","runClearTimeout","Item","array","nextTick","title","browser","argv","versions","addListener","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","registerImmediate","html","channel","messagePrefix","onGlobalMessage","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","toString","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","MessageChannel","port1","port2","documentElement","script","Math","random","attachEvent","task","clearImmediate","scope","Timeout","id","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","Query","analysisType","analysis","set","timezone","getTimezoneOffset","KeenLibrary","readKey","q","post","output","promises","attributes","v","k","RegExp","$1","dv","index","deepValue","deepKey","_deepKey","attribute","addFilter","operator","filters","property_name","property_value","KeenAnalysis","put","del"],"mappings":"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","file":"keen-analysis.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","module.exports = each;\n\nfunction each(o, cb, s){\n  var n;\n  if (!o){\n    return 0;\n  }\n  s = !s ? o : s;\n  if (o instanceof Array){\n    // Indexed arrays, needed for Safari\n    for (n=0; n<o.length; n++) {\n      if (cb.call(s, o[n], n, o) === false){\n        return 0;\n      }\n    }\n  } else {\n    // Hashtables\n    for (n in o){\n      if (o.hasOwnProperty(n)) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    }\n  }\n  return 1;\n}\n","module.exports = extend;\n\nfunction extend(target){\n  for (var i = 1; i < arguments.length; i++) {\n    for (var prop in arguments[i]){\n      target[prop] = arguments[i][prop];\n    }\n  }\n  return target;\n};\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","var each = require('./each'),\n    extend = require('./extend');\n\nmodule.exports = serialize;\n\nfunction serialize(data){\n  var query = [];\n  each(data, function(value, key){\n    if ('string' !== typeof value) {\n      value = JSON.stringify(value);\n    }\n    query.push(key + '=' + encodeURIComponent(value));\n  });\n  return query.join('&');\n}\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  this._state = 0;\n  this._handled = false;\n  this._value = undefined;\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!arr || typeof arr.length === 'undefined')\n      throw new TypeError('Promise.all accepts an array');\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(values) {\n  return new Promise(function(resolve, reject) {\n    for (var i = 0, len = values.length; i < len; i++) {\n      values[i].then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","export default function(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      return constructor.resolve(callback()).then(function() {\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n","// import 'whatwg-fetch';\nimport Promise from 'promise-polyfill';\n\nimport each from 'keen-core/lib/utils/each';\nimport serialize from 'keen-core/lib/utils/serialize';\n\nexport const GET = get;\nexport const POST = post;\nexport const PUT = put;\nexport const DELETE = del;\n\n// HTTP Handlers\n// ------------------------------\n\nfunction get(config, callback){\n  if (typeof fetch !== 'undefined') {\n    return sendFetch('GET', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('GET', config, callback);\n  }\n  else if (xdrObject()){\n    return sendXdr('GET', config, callback);\n  }\n  else {\n    return sendJsonp(config, callback);\n  }\n}\n\nfunction post(config, callback){\n  if (typeof fetch !== 'undefined') {\n    return sendFetch('POST', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('POST', config, callback);\n  }\n  else if (xdrObject()){\n    return sendXdr('POST', config, callback);\n  }\n  else {\n    callback('XHR POST not supported', null);\n  }\n}\n\nfunction put(config, callback) {\n  if (typeof fetch !== 'undefined') {\n    return sendFetch('PUT', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('PUT', config, callback);\n  }\n  else {\n    callback('XHR PUT not supported', null);\n  }\n}\n\nfunction del(config, callback) {\n  if (typeof fetch !== 'undefined') {\n    return sendFetch('DELETE', config, callback);\n  }\n  else if (xhrObject()) {\n    return sendXhr('DELETE', config, callback);\n  }\n  else {\n    callback('XHR DELETE not supported', null);\n  }\n}\n\n\nfunction sendFetch(method, config, callback = undefined){\n  const self = this;\n  const headers = {};\n  let url = config.url;\n\n  if (method == 'GET') {\n    url += '?';\n    if (config.api_key) {\n      url += 'api_key=' + config.api_key + '&';\n    }\n    if (config.params) {\n      url += serialize(config.params);\n    }\n  }\n\n  each(config.headers, function(value, key){\n    if (typeof value === 'string') {\n      headers[key] = value;\n    }\n  });\n\n  return fetch(url, {\n      method,\n      body: (method !== 'GET' && config.params) ? JSON.stringify(config.params) : undefined,\n      mode: 'cors',\n      headers\n    })\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      return response.json().then(responseJSON => {\n        return Promise.reject({\n          error_code: responseJSON.error_code,\n          body: responseJSON.message,\n          status: response.status,\n          ok: false,\n          statusText: response.statusText\n        });\n      });\n    }).then(responseJSON => {\n      if (typeof callback !== 'undefined') {\n        callback.call(self, null, responseJSON);\n      }\n      return Promise.resolve(responseJSON);\n    });\n}\n\n// XMLHttpRequest Support\n// ------------------------------\n\nfunction xhrObject() {\n  const root = 'undefined' == typeof window ? this : window;\n  if (root.XMLHttpRequest &&\n       (\n         !root.ActiveXObject ||\n         (root.location && root.location.protocol\n           && 'file:' !== root.location.protocol)\n       )\n  ) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  return false;\n}\n\nfunction sendXhr(method, config, callback){\n  const xhr = xhrObject();\n  const cb = callback;\n  let url = config.url;\n\n  xhr.onreadystatechange = function() {\n    let response;\n    if (xhr.readyState == 4) {\n      if (xhr.status >= 200 && xhr.status < 300) {\n        if (xhr.status === 204) {\n          if (cb) {\n            cb(null, xhr);\n          }\n        }\n        else {\n          try {\n            response = JSON.parse( xhr.responseText );\n            if (cb && response) {\n              cb(null, response);\n            }\n          }\n          catch (e) {\n            if (cb) {\n              cb(xhr, null);\n            }\n          }\n        }\n      }\n      else {\n        try {\n          response = JSON.parse( xhr.responseText );\n          if (cb && response) {\n            cb(response, null);\n          }\n        }\n        catch (e) {\n          if (cb) {\n            cb(xhr, null);\n          }\n        }\n      }\n    }\n  };\n\n  if (method !== 'GET') {\n    xhr.open(method, url, true);\n    each(config.headers, function(value, key){\n      if (typeof value === 'string') {\n        xhr.setRequestHeader(key, value);\n      }\n    });\n    if (config.params) {\n      xhr.send( JSON.stringify(config.params) );\n    }\n    else {\n      xhr.send();\n    }\n  }\n  else {\n    url += '?';\n    if (config.api_key) {\n      url += 'api_key=' + config.api_key + '&';\n    }\n    if (config.params) {\n      url += serialize(config.params);\n    }\n    xhr.open(method, url, true);\n    each(config.headers, function(value, key){\n      if (typeof value === 'string') {\n        xhr.setRequestHeader(key, value);\n      }\n    });\n    xhr.send();\n  }\n\n  return xhr;\n}\n\n\n// XDomainRequest Support\n// ------------------------------\n\nfunction xdrObject() {\n  const root = 'undefined' == typeof window ? this : window;\n  if (root.XDomainRequest) {\n    return new root.XDomainRequest();\n  }\n  return false;\n}\n\nfunction sendXdr(method, config, callback) {\n  const xdr = xdrObject();\n  let cb = callback;\n\n  if (xdr) {\n    xdr.timeout = config.timeout || 300 * 1000;\n\n    xdr.ontimeout = function () {\n      handleResponse(xdr, null);\n    };\n\n    xdr.onerror = function () {\n      handleResponse(xdr, null);\n    };\n\n    xdr.onload = function() {\n      var response = JSON.parse(xdr.responseText);\n      handleResponse(null, response);\n    };\n\n    xdr.open(method.toLowerCase(), config.url);\n\n    setTimeout(function () {\n      if (config['params']) {\n        xdr.send( serialize(config['params']) );\n      }\n      else {\n        xdr.send();\n      }\n    }, 0);\n  }\n\n  function handleResponse(a, b){\n    if (cb && typeof cb === 'function') {\n      cb(a, b);\n      callback = cb = void 0;\n    }\n  }\n\n  return xdr;\n}\n\n\n// JSON-P Support\n// ------------------------------\n\nfunction sendJsonp(config, callback){\n  let url = config.url;\n  let cb = callback;\n  const timestamp = new Date().getTime();\n  const scriptTag = document.createElement('script');\n  const parent = document.getElementsByTagName('head')[0];\n  let callbackName = 'keenJSONPCallback';\n  let loaded = false;\n\n  callbackName += timestamp;\n  while (callbackName in window) {\n    callbackName += 'a';\n  }\n\n  window[callbackName] = function(response) {\n    if (loaded === true) {\n      return;\n    }\n    handleResponse(null, response);\n  };\n\n  if (config.params) {\n    url += serialize(config.params);\n  }\n\n  // Early IE (no onerror event)\n  scriptTag.onreadystatechange = function() {\n    if (loaded === false && this.readyState === 'loaded') {\n      handleResponse('An error occurred', null);\n    }\n  };\n\n  // Not IE\n  scriptTag.onerror = function() {\n    // on IE9 both onerror and onreadystatechange are called\n    if (loaded === false) {\n      handleResponse('An error occurred', null);\n    }\n  };\n\n  scriptTag.src = url + '&jsonp=' + callbackName;\n  parent.appendChild(scriptTag);\n\n  function handleResponse(a, b){\n    loaded = true;\n    if (cb && typeof cb === 'function') {\n      cb(a, b);\n      callback = cb = void 0;\n    }\n    window[callbackName] = undefined;\n    try {\n      delete window[callbackName];\n    } catch(e){};\n    parent.removeChild(scriptTag);\n  }\n\n}\n","import each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\n\nexport default function request(method, httpHandlers){\n  this.httpHandlers = httpHandlers;\n  return function(str){\n    this.config = {\n      'api_key' : undefined,\n      'method'  : method,\n      'params'  : undefined,\n      'timeout' : 300 * 1000,\n      'url'     : str,\n      'headers' : {\n        'Authorization' : '',\n        'Content-type'  : 'application/json'\n      }\n    };\n    return this;\n  }.bind(this);\n}\n\nrequest.prototype.auth = function(str){\n  if (typeof str === 'string') {\n    this.config.api_key = typeof str === 'string' ? str : undefined;\n    this.headers({\n      'Authorization': str\n    });\n  }\n  return this;\n};\n\nrequest.prototype.headers = function(obj){\n  if (typeof obj === 'object') {\n    each(obj, function(value, key){\n      this.config['headers'][key] = value;\n    }.bind(this));\n  }\n  return this;\n};\n\nrequest.prototype.timeout = function(num){\n  this.config.timeout = typeof num === 'number' ? num : 300 * 1000;\n  return this;\n};\n\nrequest.prototype.send = function(obj){\n  this.config.params = (obj && typeof obj === 'object') ? obj : {};\n  const httpHandler = this.httpHandlers[this.config['method']];\n  const httpOptions = extend({}, this.config);\n\n  // Temporary mod to append analysis_type to responses\n  // for generic HTTP requests to known query resources\n  if (typeof httpOptions.params.analysis_type === 'undefined') {\n    if (httpOptions.url.indexOf('/queries/') > -1\n      && httpOptions.url.indexOf('/saved/') < 0) {\n        httpOptions.params.analysis_type = getAnalysisType(httpOptions.url);\n    }\n  }\n\n  return new Promise(function(resolve, reject, onCancel) {\n    const httpRequest = httpHandler(httpOptions, function(err, res){\n      let augmentedResponse = res;\n      if (err) {\n        reject(err);\n      }\n      else {\n        // Append query object to ad-hoc query results\n        if (typeof httpOptions.params.event_collection !== 'undefined'\n          && typeof res.query === 'undefined') {\n            augmentedResponse = extend({ query: httpOptions.params }, res);\n        }\n        resolve(augmentedResponse);\n      }\n    });\n    console.log(onCancel);\n    if (onCancel) {\n      console.log('ooo');\n      onCancel(function(){\n        if (httpRequest.abort) {\n          httpRequest.abort();\n        }\n      });\n    }\n    return httpRequest;\n  });\n};\n\nexport function getAnalysisType(str){\n  const split = str.split('/queries/');\n  return split[split.length-1];\n}\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","module.exports = parseParams;\n\nfunction parseParams(str){\n  // via: http://stackoverflow.com/a/2880929/2511985\n  var urlParams = {},\n      match,\n      pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n      search = /([^&=]+)=?([^&]*)/g,\n      decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n      query  = str.split(\"?\")[1];\n\n  while (!!(match=search.exec(query))) {\n    urlParams[decode(match[1])] = decode(match[2]);\n  }\n  return urlParams;\n};\n","(function(env){\n  var previousKeen = env.Keen || undefined;\n  var each = require('./utils/each'),\n      extend = require('./utils/extend'),\n      parseParams = require('./utils/parse-params'),\n      serialize = require('./utils/serialize');\n\n  var Emitter = require('component-emitter');\n\n  function Client(props){\n    if (this instanceof Client === false) {\n      return new Client(props);\n    }\n    this.configure(props);\n\n    // Set up event handling\n    if (Client.debug) {\n      this.on('error', Client.log);\n    }\n    this.emit('ready');\n    Client.emit('client', this);\n  }\n\n  if (previousKeen && typeof previousKeen.resources === 'undefined') {\n    Client.legacyVersion = previousKeen;\n  }\n\n  Emitter(Client);\n  Emitter(Client.prototype);\n\n  extend(Client, {\n    debug: false,\n    enabled: true,\n    loaded: false,\n    version: '__VERSION__'\n  });\n\n  // Set or extend helpers\n  Client.helpers = Client.helpers || {};\n\n  // Set or extend resources\n  Client.resources = Client.resources || {};\n  extend(Client.resources, {\n    'base'      : '{protocol}://{host}',\n    'version'   : '{protocol}://{host}/3.0',\n    'projects'  : '{protocol}://{host}/3.0/projects',\n    'projectId' : '{protocol}://{host}/3.0/projects/{projectId}',\n    'events'    : '{protocol}://{host}/3.0/projects/{projectId}/events',\n    'queries'   : '{protocol}://{host}/3.0/projects/{projectId}/queries',\n    'datasets'  : '{protocol}://{host}/3.0/projects/{projectId}/datasets'\n  });\n\n  // Set or extend utils\n  Client.utils = Client.utils || {};\n  extend(Client.utils, {\n    'each'        : each,\n    'extend'      : extend,\n    'parseParams' : parseParams,\n    'serialize'   : serialize\n  });\n\n  Client.extendLibrary = function(target, source) {\n    var previous = previousKeen || source;\n    if (isDefined(previous) && isDefined(previous.resources)) {\n      each(previous, function(value, key) {\n        if (typeof value === 'object') {\n          target[key] = target[key] || {};\n          extend(target[key], value);\n        }\n        else {\n          target[key] = target[key] || value;\n        }\n      });\n      extend(target.prototype, previous.prototype);\n    }\n    return target;\n  };\n\n  Client.log = function(str){\n    if (Client.debug && typeof console === 'object') {\n      console.log('[Keen]', str);\n    }\n  };\n\n  Client.noConflict = function(){\n    if (typeof env.Keen !== 'undefined') {\n      env.Keen = Client.legacyVersion || previousKeen;\n    }\n    return Client;\n  };\n\n  Client.ready = function(fn){\n    if (Client.loaded) {\n      fn();\n    }\n    else {\n      Client.once('ready', fn);\n    }\n  };\n\n  Client.prototype.configure = function(obj){\n    var config = obj || {};\n    this.config = this.config || {\n      projectId    : undefined,\n      writeKey     : undefined,\n      host         : 'api.keen.io',\n      protocol     : 'https',\n      requestType  : 'jsonp',\n      resources    : extend({}, Client.resources)\n    };\n\n    // IE<10 request shim\n    if (typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1) {\n      config.protocol = document.location.protocol.replace(':', '');\n    }\n\n    if (config.host) {\n      config.host.replace(/.*?:\\/\\//g, '');\n    }\n\n    extend(this.config, config);\n    return this;\n  };\n\n  Client.prototype.masterKey = function(str){\n    if (!arguments.length) return this.config.masterKey;\n    this.config.masterKey = str ? String(str) : null;\n    return this;\n  };\n\n  Client.prototype.projectId = function(str){\n    if (!arguments.length) return this.config.projectId;\n    this.config.projectId = (str ? String(str) : null);\n    return this;\n  };\n\n  Client.prototype.resources = function(obj){\n    if (!arguments.length) return this.config.resources;\n    var self = this;\n    if (typeof obj === 'object') {\n      each(obj, function(value, key){\n        self.config.resources[key] = (value ? value : null);\n      });\n    }\n    return self;\n  };\n\n  Client.prototype.url = function(name){\n    var args = Array.prototype.slice.call(arguments, 1),\n        baseUrl = this.config.resources.base || '{protocol}://{host}',\n        path;\n\n    if (name && typeof name === 'string') {\n      if (this.config.resources[name]) {\n        path = this.config.resources[name];\n      }\n      else {\n        path = baseUrl + name;\n      }\n    }\n    else {\n      path = baseUrl;\n    }\n\n    each(this.config, function(value, key){\n      if (typeof value !== 'object') {\n        path = path.replace('{' + key + '}', value);\n      }\n    });\n\n    each(args, function(arg, i){\n      if (typeof arg === 'string') {\n        path += '/' + arg;\n      }\n      else if (typeof arg === 'object') {\n        path += '?';\n        each(arg, function(value, key){\n          path += key + '=' + value + '&';\n        });\n        path = path.slice(0, -1);\n      }\n    });\n\n    return path;\n  };\n\n  domReady(function(){\n    Client.loaded = true;\n    Client.emit('ready');\n  });\n\n  function domReady(fn){\n    if (Client.loaded || typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    // Firefox 3.5 shim\n    if(document.readyState == null && document.addEventListener){\n      document.addEventListener('DOMContentLoaded', function DOMContentLoaded(){\n        document.removeEventListener('DOMContentLoaded', DOMContentLoaded, false);\n        document.readyState = 'complete';\n      }, false);\n      document.readyState = 'loading';\n    }\n    testDom(fn);\n  }\n\n  function testDom(fn){\n    if (/in/.test(document.readyState)) {\n      setTimeout(function(){\n        testDom(fn);\n      }, 9);\n    }\n    else {\n      fn();\n    }\n  }\n\n  function isDefined(target) {\n    return typeof target !== 'undefined';\n  }\n\n  function isUndefined(target) {\n    return typeof target === 'undefined';\n  }\n\n  module.exports = Client;\n\n}).call(this, typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {});\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","import Promise from 'promise-polyfill';\nimport KeenLibrary from 'keen-core';\n//\"browsers\": [\"last 2 versions\", \"safari >= 7\"]\nimport each from 'keen-core/lib/utils/each';\nimport extend from 'keen-core/lib/utils/extend';\n\nKeenLibrary.prototype.readKey = function(str){\n  if (!arguments.length) return this.config.readKey;\n  this.config.readKey = str ? String(str) : null;\n  return this;\n};\n\nKeenLibrary.prototype.query = function(a, b){\n  if (a && b && typeof b === 'string') {\n    if (b.indexOf('/result') < 0) {\n      b += '/result';\n    }\n    return this\n      .get(this.url('queries', a, b))\n      .auth(this.readKey())\n      .send();\n  }\n  else if (a === 'dataset' && typeof b === 'object') {\n    return this\n      .get(this.url('datasets', b.name, 'results'))\n      .auth(this.readKey())\n      .send(b);\n  }\n  else if (a && b && typeof b === 'object') {\n    // Include analysis_type for downstream use\n    const q = extend({ analysis_type: a }, b);\n    return this\n      .post(this.url('queries', a))\n      .auth(this.readKey())\n      .send(q);\n  }\n  else if (a && !b) {\n    return Promise.reject({\n      error_code: 'SDKError',\n      message: \".query() called with incorrect arguments\"\n    });\n  }\n};\n\n// Keen.Query handler\n// --------------------------------\nKeenLibrary.Query = Query;\n\nKeenLibrary.prototype.run = function(q, callback){\n  const self = this;\n  const cb = callback;\n  let output;\n\n  const queries = q instanceof Array? q : [q];\n  const promises = [];\n\n  each(queries, function(query, i){\n    if (typeof query === 'string') {\n      promises.push(self.query('saved', query + '/result'));\n    }\n    else if (query instanceof KeenLibrary.Query) {\n      // Include analysis_type for downstream use\n      promises.push(self.query(query.analysis, extend({ analysis_type: query.analysis }, query.params)));\n    }\n  });\n\n  if (promises.length > 1) {\n    output = Promise.all(promises);\n  }\n  else {\n    // Only return single\n    output = promises[0];\n  }\n\n  if (cb) {\n    // Manually handle callback, as\n    // Promise.nodeify drops nulls\n    output.then(function(res){\n      cb(null, res);\n    });\n    output['catch'](function(err){\n      cb(err, null);\n    });\n  }\n\n  return output;\n};\n\nfunction Query(analysisType, params) {\n  this.analysis = analysisType;\n  this.params = {};\n  this.set(params);\n\n  // Localize timezone if none is set\n  if (this.params.timezone === void 0) {\n    this.params.timezone = new Date().getTimezoneOffset() * -60;\n  }\n}\n\nQuery.prototype.set = function(attributes) {\n  const self = this;\n  each(attributes, function(v, k){\n    let key = k;\n    let value = v;\n    if (k.match(new RegExp('[A-Z]'))) {\n      key = k.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n    }\n    self.params[key] = value;\n    if (value instanceof Array) {\n      each(value, function(dv, index){\n        if (dv instanceof Array == false && typeof dv === 'object') {\n          each(dv, function(deepValue, deepKey){\n            if (deepKey.match(new RegExp('[A-Z]'))) {\n              var _deepKey = deepKey.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n              delete self.params[key][index][deepKey];\n              self.params[key][index][_deepKey] = deepValue;\n            }\n          });\n        }\n      });\n    }\n  });\n  return self;\n};\n\nQuery.prototype.get = function(attribute) {\n  let key = attribute;\n  if (key.match(new RegExp('[A-Z]'))) {\n    key = key.replace(/([A-Z])/g, function($1) { return '_'+$1.toLowerCase(); });\n  }\n  if (this.params) {\n    return this.params[key] || null;\n  }\n};\n\nQuery.prototype.addFilter = function(property, operator, value) {\n  this.params.filters = this.params.filters || [];\n  this.params.filters.push({\n    'property_name': property,\n    'operator': operator,\n    'property_value': value\n  });\n  return this;\n};\n\nexport const KeenAnalysis = KeenLibrary;\nexport default KeenAnalysis;\n","import extend from 'keen-core/lib/utils/extend';\n\nimport KeenAnalysis from './index';\nimport request from './request';\nimport * as httpHandlers from './utils/http-browser';\n\nKeenAnalysis.prototype.get = new request('GET', httpHandlers);\nKeenAnalysis.prototype.post = new request('POST', httpHandlers);\nKeenAnalysis.prototype.put = new request('PUT', httpHandlers);\nKeenAnalysis.prototype.del = new request('DELETE', httpHandlers);\n\nexport const Keen = KeenAnalysis.extendLibrary(KeenAnalysis);\nexport default Keen;\n"],"sourceRoot":""}